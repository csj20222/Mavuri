# π” λΌμ°ν…μ΄λ€?
- λΌμ°ν…μ΄λ€ νΉμ • μ—”λ“ ν¬μΈνΈμ— λ€ν• ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— μ„λ²„κ°€ μ‘λ‹µν•λ” λ°©λ²•μ„ κ²°μ •ν•λ”κ²ƒμΌλ΅
μ΄ κΈ€μ—μ„μ λΌμ°ν…μ€ ν™”λ©΄μ—μ„ λ‹¤λ¥Έ ν™”λ©΄μΌλ΅ μ „ν™ν•λ” λ‚΄λΉ„κ²μ΄μ… κΈ°λ¥μ΄λΌκ³  μƒκ°ν•λ©΄ μ‰½λ‹¤.

> **μ—”λ“ν¬μΈνΈ**
URIμ™€ HTTP μ”μ²­ λ©”μ„λ“(Get, Post, Put, Delete λ“±)λ΅ κµ¬λ¶„λ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ λ§ν•λ‹¤.

# π–οΈ λΌμ°νΈκµ¬μ΅°
> **Expressμ—μ„μ λΌμ°νΈ κµ¬μ΅°**
> ~~~javascript
> const express = require('express');
> const app = express();
> // ν΄λΌμ΄μ–ΈνΈμ—μ„ HTTP μ”μ²­ λ©”μ„λ“ μ¤‘
> // Getμ„ μ΄μ©ν•΄μ„ 'host:port'λ΅ μ”μ²­μ„ λ³΄λ‚΄λ©΄
> // μ‹¤ν–‰λλ” λΌμ°νΈ
> app.get('/', (req, res) => {
>   res.send('Hello World!');
> });
> ~~~

~~~javascript
app.METHOD(PATH, HANDLER);
~~~


- **app** : Expressμ μΈμ¤ν„΄μ¤
- **METHOD** : HTTP μ”μ²­ λ©”μ„λ“(Get, Post, Put, Delete λ“±)
- **PATH** : μ„λ²„μ—μ„μ κ²½λ΅
- **HANDLER** : λΌμ°νΈ(Route)κ°€ μΌμΉν• λ• μ‹¤ν–‰λλ” ν•¨μ

# π–οΈ λΌμ°νΈ λ©”μ„λ“
- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ μ”μ²­μ„ λ³΄λ‚Ό λ• μ‚¬μ©ν•λ” HTTP μ”μ²­ λ©”μ„λ“λ¥Ό λ§ν•λ‹¤.

- ν΄λΌμ΄μ–ΈνΈμ—μ„ get μ„ μ‚¬μ©ν•΄μ„ HTTP μ”μ²­ λ©”μ„λ“λ¥Ό μ„λ²„λ΅ μ „μ†΅ν–λ‹¤λ©΄,
Express λΌμ°νΈ λ©”μ„λ“ μ—­μ‹ getμΌλ΅ μ‘μ„±λ μ²λ¦¬ μ½”λ“κ°€ μμ–΄μ•Ό ν•΄λ‹Ή ν•¨μκ°€ λ™μ‘ λλ‹¤.

### μμ μ½”λ“

~~~javascript
const express = require('express');
const app = express();

app.listen(5000, () => {
  // 5000λ² ν¬νΈλ΅ μ›Ή μ„λ²„ μ‹¤ν–‰
  consol.log("Server started. port 5000");
});

// ν΄λΌμ΄μ–ΈνΈ HTTP μ”μ²­ λ©”μ„λ“ Get λ°©μ‹μΌλ΅ 'host:5000/practice'λ¥Ό νΈμ¶ν–μ„ κ²½μ°
app.get("/practice", (req, res) => {
  res.send("get μ”μ²­μ— λ€ν• μ‘λ‹µ");
});

// ν΄λΌμ΄μ–ΈνΈ HTTP μ”μ²­ λ©”μ„λ“ Post λ°©μ‹μΌλ΅ 'host:5000/practice'λ¥Ό νΈμ¶ν–μ„ κ²½μ°
app.post("/practice", (req, res) => {
  res.send("post μ”μ²­μ— λ€ν• μ‘λ‹µ");
});

// ν΄λΌμ΄μ–ΈνΈ HTTP μ”μ²­ λ©”μ„λ“ μΆ…λ¥μ— μƒκ΄€μ—†λ” λ°©μ‹μΌλ΅ 'host:5000/practice'λ¥Ό νΈμ¶ν–μ„ κ²½μ°
app.all("/practice", (req, res) => {
  res.send("λ¨λ“  μ”μ²­μ— λ€ν• μ‘λ‹µ");
});
~~~

# π–οΈ λΌμ°νΈ κ²½λ΅
- μ”μ²­ λ©”μ„λ“μ™€μ μ΅°ν•©μ„ ν†µν•΄μ„ μ”μ²­μ΄ μ΄λ£¨μ–΄μ§ μ μλ” μ—”λ“ ν¬μΈνΈλ¥Ό μ •μν•΄ μ¤€λ‹¤.
λΌμ°νΈλ¥Ό ν‘κΈ°ν•λ” λ°©λ²•μ—λ” λ¬Έμμ—΄, ν¨ν„΄, μ •κ·μ‹μ΄ μλ‹¤.

### λ¬Έμμ—΄

~~~javascript
'/', '/about', '/about/practice'
~~~

### ν¨ν„΄

~~~javascript
'/ab?cd'	// b?λ” λ¬Έμ bκ°€ 0κ° νΉμ€ 1κ°κ°€ μλ‹¤λ” ν‘ν„.
'/ab+cd'	// b+λ” λ¬Έμ bκ°€ 1κ° μ΄μƒ μλ‹¤λ” ν‘ν„.
'/ab*cd'	// λ¬Έμ abμ™€ cdμ‚¬μ΄μ— λ¬Έμκ°€ μ—†κ±°λ‚ νΉμ€ μ–΄λ–¤ λ¬Έμλ„ μ¬μ μλ‹¤λ” ν‘ν„.
'ab(cd)?e'	// (cd)?λ” λ¬Έμ cdκ°€ 0λ² νΉμ€ 1λ² μμ„ μ μλ‹¤λ” ν‘ν„.
~~~

### μ •κ·μ‹

~~~javascript
/a/			// ν΄λΌμ΄μ–ΈνΈμ—μ„ μ”μ²­ν• λΌμ°νΈ κ²½λ΅μ— aκ°€ ν¬ν•¨λμ–΄ μλ” κ²½μ°
/^insert/	// ν΄λΌμ΄μ–ΈνΈμ—μ„ μ”μ²­ν• λΌμ°νΈ κ²½λ΅κ°€ λ¬Έμ insertλ΅ μ‹μ‘ν•λ” κ²½μ°
~~~

# π–οΈ λΌμ°νΈ ν•Έλ“¤λ¬
- ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— λ”°λΌ λΌμ°νΈκ°€ μΌμΉν•λ” κ²½μ° μ‹¤ν–‰λλ” μ½λ°± ν•¨μμ΄λ‹¤.

>λΌμ°νΈ ν•Έλ“¤λ¬μ—μ„ μ‚¬μ©λλ” **λ§¤κ°λ³€μ**
- req : Requestλ΅ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ μ •λ³΄λ¥Ό λ‹΄κ³  μλ‹¤.
- res : Responseλ΅ ν΄λΌμ΄μ–ΈνΈμ—κ² μ‘λ‹µν•κΈ° μ„ν• μ •λ³΄λ¥Ό λ‹΄κ³  μλ‹¤.
- next : λ‹¤μ λ―Έλ“¤μ›¨μ–΄ ν•¨μλ¥Ό κ°€λ¦¬ν‚¤λ” Objectμ΄λ‹¤.

### next
~~~javascript
// μ½λ°± ν•¨μμ μ„Έ λ²μ§Έ λ§¤κ°λ³€μλ΅ next μ¤λΈμ νΈ μ‚¬μ©
app.get('/example', (req, res, next) => {
  console.log('μ²« λ²μ§Έ μ½λ°± ν•¨μ');
  next();  //λ‹¤μ μ½λ°± ν•¨μ νΈμ¶
},(req, res) => {
  res.send('λ‘ λ²μ§Έ μ½λ°± ν•¨μ'); //ν΄λΌμ΄μ–ΈνΈλ΅ μ‘λ‹µ
});
~~~

### μ½λ°± ν•¨μ λ°°μ—΄
~~~javascript
const ex0 = (req, res, next) => {
  console.log('μ²« λ²μ§Έ μ½λ°± ν•¨μ');
  next();	// λ‹¤μ μ½λ°± ν•¨μ νΈμ¶
};

const ex1 = (req, res, next) => {
  console.log('λ‘ λ²μ§Έ μ½λ°± ν•¨μ');
  next();	// λ‹¤μ μ½λ°± ν•¨μ νΈμ¶
};

const ex2 = (req, res, next) => {
  res.send('μ„Έ λ²μ§Έ μ½λ°± ν•¨μ'); // ν΄λΌμ΄μ–ΈνΈλ΅ μ‘λ‹µ
};

app.get('/practice', [ex0, ex1, ex2]); // μ½λ°± ν•¨μ λ°°μ—΄λ΅ μ •μ
~~~

# π–οΈ μ‘λ‹µ λ©”μ„λ“
- λ‹¤μ λ©”μ„λ“ μ¤‘μ— ν•κ°€μ§€ λ°©λ²•μΌλ΅ μ‘λ‹µ ν•΄μ•Ό ν•λ‹¤.
μ„λ²„μ—μ„ μ‘λ‹µν•μ§€ μ•μ€ κ²½μ°μ— ν΄λΌμ΄μ–ΈνΈλ” μ‘λ‹µμ„ λ°›μ§€ λ»ν•κ³  μ •μ§€λ μƒνƒλ¥Ό μ μ§€ν•λ‹¤.

| μ‘λ‹µ λ©”μ„λ“ | μ„¤λ… |
|----|----|
|**res.download()**|νμΌμ„ λ‹¤μ΄λ΅λ“ ν•λ„λ΅ ν”„λ΅¬ν”„νΈ|
|**res.end()**|μ‘λ‹µ ν”„λ΅μ„Έμ¤λ¥Ό μΆ…λ£ν•λ‹¤.|
|**res.json()**|JSON μ‘λ‹µμ„ μ „μ†΅ν•λ‹¤|
|**res.jsonp()**|JSONP μ§€μ›μ„ ν†µν•΄JSON μ‘λ‹µμ„ μ „μ†΅ν•λ‹¤.|
|**res.redirect()**|μ”μ²­μ κ²½λ΅λ¥Ό μ¬μ§€μ •ν•΄ μ¤€λ‹¤.|
|**res.render()**|λ·°(view)ν…ν”λ¦Ώμ„ λ λ”λ§ ν•΄μ¤€λ‹¤.|
|**res.send()**|λ‹¤μ–‘ν• μ ν•μ μ‘λ‹µμ„ μ „μ†΅ν•λ‹¤.|
|**res.sendFile()**|νμΌμ„ octetμ¤νΈλ¦ΌμΌλ΅ μ „μ†΅ν•λ‹¤.|
|**res.sendStatus()**|μ‘λ‹µ μƒνƒ μ½”λ“λ¥Ό μ„¤μ •ν• ν›„ ν•΄λ‹Ή μ½”λ“λ¥Ό μ‘λ‹µ λ³Έλ¬Έ(body)μ— λ‹΄μ•„μ„ μ „μ†΅ν•λ‹¤. <br>(404 Not Found λ“±)|


# π–οΈ λΌμ°νΈ μ²λ¦¬
- app.route() : λ¨λ“μ‹ λΌμ°νΈλ¥Ό μ‘μ„±ν•λ©΄ μ¤‘λ³µμ„±μ΄ κ°μ†ν•΄ ν¨μ¨μ μΈ μ½”λ“ κ΄€λ¦¬κ°€ κ°€λ¥ν•λ‹¤.


### app.route()
- Get, Post, Put κ³Ό κ°™μ€ λΌμ°νΈ λ©”μ„λ“λ¥Ό ν•κ³³μ— μ‘μ„±ν•  μ μλ‹¤.
~~~javascript
// λ¨λ“μ‹ λΌμ°ν„° - ν•λ‚μ λΌμ°νΈ κ²½λ΅μ— κ° λΌμ°νΈ λ©”μ„λ“λ¥Ό μ²λ¦¬
app.route('/practice')
 .get((req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ΅°ν μ²λ¦¬
   res.send('μ •λ³΄ μ΅°ν');
})
 .post((req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ €μ¥ μ²λ¦¬
   res.send('μ •λ³΄ μ¶”κ°€');
})
 .put((req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μμ • μ²λ¦¬
   res.send('μ •λ³΄ μμ •');
})
 .delete((req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ‚­μ  μ²λ¦¬
   res.send('μ •λ³΄ μ‚­μ ');
})

~~~

### express.Router
- λΌμ°νΈ μ²λ¦¬λ¥Ό μ—¬λ¬ κ°μ νμΌλ΅ λ¶„λ¦¬ν•΄ κµ¬ν„μ΄ κ°€λ¥ν•λ‹¤.

<spen style="color:ForestGreen">**routes/customer.js**</spen>

~~~javascript
const express = require('express');
const route = express.Route();

router
 .get("/", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ΅°ν μ²λ¦¬
   res.send('κ³ κ° μ •λ³΄ μ΅°ν');
})
 .post("/insert", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ €μ¥ μ²λ¦¬
   res.send('κ³ κ° μ •λ³΄ μ¶”κ°€');
})
 .put("/update", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μμ • μ²λ¦¬
   res.send('κ³ κ° μ •λ³΄ μμ •');
})
 .delete("/delete", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ‚­μ  μ²λ¦¬
   res.send('κ³ κ° μ •λ³΄ μ‚­μ ');
});
~~~

<spen style="color:ForestGreen">**route/product.js**</spen>

~~~javascript
const express = require('express');
const route = express.Route();

router
 .get("/", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ΅°ν μ²λ¦¬
   res.send('μƒν’ μ •λ³΄ μ΅°ν');
})
 .post("/insert", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ €μ¥ μ²λ¦¬
   res.send('μ‚Όν’ μ •λ³΄ μ¶”κ°€');
})
 .put("/update", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μμ • μ²λ¦¬
   res.send('μƒν’ μ •λ³΄ μμ •');
})
 .delete("/delete", (req, res) => {  // HTTP λ©”μ„λ“ get μ”μ²­μ— λ€ν• μ‚­μ  μ²λ¦¬
   res.send('μƒν’ μ •λ³΄ μ‚­μ ');
});
~~~
<spen style="color:ForestGreen">**app.js**</spen>

~~~javascript
const express = require('express');
const customerRoute = require('./routes/customer'); // customer λΌμ°νΈλ¥Ό μ¶”κ°€
const proeuctRoute = require('./routes/product'); 	// product λΌμ°νΈλ¥Ό μ¶”κ°€
const app = express();

app.use(express.json({
  limit: '50mb;	// μµλ€ 50 λ©”κ°€
})); // ν΄λΌμ΄μ–ΈνΈ μ”μ²­ bodyλ¥Ό jsonμΌλ΅ νμ‹± μ²λ¦¬
app.listen(5000, () => {
  // 5000λ² ν¬νΈλ΅ μ›Ή μ„λ²„ μ‹¤ν–‰
  consol.log('Server starte. port 5000.');
})

app.use('/customer', customerRoute); // customer λΌμ°νΈλ¥Ό μ¶”κ°€ν•κ³  κΈ°λ³Έ κ²½λ΅λ΅ /customer  μ‚¬μ©
app.use('/product', productRoute); // product λΌμ°νΈλ¥Ό μ¶”κ°€ν•κ³  κΈ°λ³Έ κ²½λ΅λ΅ /product  μ‚¬μ©
~~~

- μ„μ λΌμ°ν„° μ²λ¦¬ λ°©μ‹κ³Ό Json-serverλ¥Ό μ΄μ©ν•λ©΄ κ°„λ‹¨ν• CRUD κΈ°λ¥μ„ λ§λ“¤ μ μλ‹¤.
