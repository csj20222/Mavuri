## 📁 Node.js 란?

> **Node.js는 Chrome V8 JavaScript 엔진으로 빌드 된 JavaScript 런타임입니다.**

각각의 인터넷 브라우저에는 JavaScript를 읽고 해석하는 기능들이 있습니다.
- Chrome에는 V8
- Firefox에는 SpiderMonkey
- Safari에는 JavaScriptCore (Nitro라고도 함)
- Edge는 원래 Chakra를 기반으로 했지만 최근에는 Chromium 과 V8 엔진을 사용

Chrome의 V8를 기반으로 브라우저 말고도 로컬PC 환경에서도 JavaScript를 실행시켜줄 수 있는 실행창(런타임)입니다.
즉, JavaScript 실행기 라고 보면 된다. 
Node.js를 켜서 JavaScript 명령어를 입력하고 실행시키면 실행이 된다. 
그러한 이유로 Node.js를 이용하면 웹 브라우저와 무관한 프로그램을 만들 수 있고

> **서버를 만들 수 있다**

서버를 만들수 있는게 중요한 이유인데
이전까지 Server-Client 웹사이트를 만들 때 웹에서 표시되는 부분은 JavaScript를 사용하여 만들어야만 했으며, 서버는 Ruby, Java등 다른 언어를 써서 만들어야 했는데 노드를 통해

> **한가지 언어로 전체 웹 페이지를 만들 수 있게 됐다.**

## 💡 노드의 특징

#### 🔍 이벤트기반
- 노드는 V8과 더불어 libuv라는 라이브러리를 사용한다.
- libuv 라이브러리는 노드의 특성인 이벤트기반, 논 블로킹I/O 모델을 구현하고 있다.
- 이벤트 기반(Event-driven)이란 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식을 의미한다.
- 즉 이벤트 기반 시스템이서는 특정 이벤트가 발생할 때 무엇을 할지 미리 등록해두고, 이를 이벤트 리스너에 콜백함수를 등록한다.
- 이후 이벤트가 발생하면 리스너에 등록해둔 콜백함수를 호출하며, 이벤트가 끝난 후 노드는 다음 이베트가 발생할 때까지 대기한다.

#### 🔍 싱글 스레드

자바스크립트 코드는 동시에 실행될 수 없는데 그 이유는 노드가 싱글 스레드 기반이기 때문이다.
- **프로세스** : 운영체제에서 할당하는 작업의 단위이다. 노드나 웹 브러우저 같은 프로그램은 개별적인 프로세스이다. 프로세스 간에는 메모리 등의 자원을 공유하지 않는다.
- **스레드** : 스레드는 프로세스 내에서 실행되는 흐름이 단위이다. 프로세스는 스레드를 여러 개 생성해 여러 작업을 동시에 처리할 수 있다. 스레드들은 부모 프로세스의 자원을 공유한다. 같은 주소의 메모리에 접근 가능하므로 데이터를 공유할 수 있다.

#### 🔍 이벤트루프
![](https://velog.velcdn.com/images/csj20222/post/341927a2-5c3a-4765-a4e0-168f283bb9b8/image.png)

- 이벤트 루프(Event loop)는 여러 이벤트가 동시에 발생했을 떄 어떤 순서로 콜백함수를 호출 할지를 이벤트 루프가 판단한다.
- 노드는 이벤트가 종료될 때까지 이벤트 처리를 위한 작업을 반복하므로 루프(loop)라고 부른다.

#### 🔍 논 블로킹 I/O
![](https://velog.velcdn.com/images/csj20222/post/32dace15-deb6-4b4a-83c4-f77f9e15b931/image.png)

- 이벤트 루프를 잘 활용하면 오래 걸리는 작업을 효율적으로 처리할 수 있다.
- 작업에는 두 가지 종류가 있는데 동시에 실행될 수 있는 작업과 동시에 실행될 수 없는 작업이다.
- 특히 파일 시스템 접근, 네트워크를 통한 요청 작업은 입력(Input)/출력(Output)의 일종이며,
이러한 작업을 할 때 노드는 비동기 방식으로 블로킹을 만들지 않게 끔 처리한다.(논블로킹)
- 비동기는 이전 작업이 완료될 때까지 대기하지 않고 동시에 작업을 수행한다.
- 동기는 이전 작업이 끝나야만 다음 작업을 수행한다.
- 자세하게 풀어서 이야기하면 함수 호출 시 당장 실행하는 것이 아니라(동기→블로킹)
일단 어느곳에 쌓아놓고 동시에 요청을 처리하고(비동기→논 블로킹)
요청이 완료된 순서대로처리(스택 이용) 한다는 말이다.

## ⭕ 결론
- 노드는 기본적으로 싱글 스레드, 논 블로킹 모델을 채용하므로 I/O 요청이 많이 발생하면 노드를 서버로 하용하는것이 좋다.
하지만 노드는 CPU 부하가 큰 작업에는 적합하지 않다.
(동영상압축, 이미지변환 등)

- 우리가 작성하는 코드는 모두 스레드 하나에서 처리되기 때문에 코드가 CPU 연산을 많이 요구하면 스레드 하나가 혼자서 감당하기 어렵다.

- 즉, 개수는 많지만 크기는 작은 데이터를 실시간으로 주고받는데 노드는 적합하다.
예를 들어 네트워크나 데이터베이스, 디스크 작업같은 I/O에 특화되어있다. 
(실시간 채팅 애플리케이션, 주식 차트)

결론적으로 노드의 장점은

> **첫 째**, 멀티 스레드 방식에 비해 적은 컴퓨터 자원을 사용한다.
> **둘 째**, I/O작업이 많은 서버로 적합하다.
> **셋 째**, 웹 서버가 내장되어 있어 별도의 웹서버를 설치할 필요가 없다.
> **넷 째**, 자바스크립트를 사용하기 때문에 JSON 형식과 쉽게 호환된다.

## 📁 Node.js의 FrameWork Express
![](https://velog.velcdn.com/images/csj20222/post/ed879c3c-4158-477e-a3ee-20a33a7c8a1a/image.webp)
- Express는 Node.js의 프레임워크(FrameWork)이다.
- 프레임워크는 어떠한 작업을 쉽게 완성하기 위한 라이브러리의 집합이라고 할 수 있다.
- 작업을 시작부터 끝까지 라이브러리로 지원한다는 점이 단순한 라이브러리와 차이가 나는 부분이다.
- 예를 들면 jQuery는 JavaScript 라이브러리로 다양한 용도를 가지고 있지만, jQuery 자체가 무엇 하나를 이루기 위한 목적을 가지고 있지는 않다.
- Express는 Node.js를 이용하여 웹 애플리케이션을 만들기 위한 틀(Frame)을 제공하는 라이브러리의 집합이다.
- 현재 JavaScript는 GitHub에서 사용률 1위인 언어이며, 이는 Node.js의 덕이 크다고 할 수 있다.

---
[참조 : [Node.js] 개념 이해하기](https://hanamon.kr/nodejs-%EA%B0%9C%EB%85%90-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/)
[참조 : https://nodejs.org/](https://nodejs.org/en/learn/getting-started/the-v8-javascript-engine)

---
